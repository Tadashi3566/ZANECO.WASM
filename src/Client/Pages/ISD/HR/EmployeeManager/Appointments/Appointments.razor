@page "/employee/appointments"
@page "/employee/appointments/{employeeId:guid}"

@using System.Globalization;
@using Syncfusion.Blazor.Buttons;
@using Syncfusion.Blazor.Data;
@using Syncfusion.Blazor.DropDowns;
@using Syncfusion.Blazor.Inputs;
@using Syncfusion.Blazor.Navigations;
@using Syncfusion.Blazor.Schedule;
@using Syncfusion.Blazor.SplitButtons

@attribute [MustHavePermission(FSHAction.View, FSHResource.Appointment)]

<FshTitle Title="Appointments" Description="Employee Appointment Management" />

<MudBreadcrumbs Items="_breadcrumbs"></MudBreadcrumbs>

<EntityTable @bind-SearchString="@_searchString" @ref="_table" TEntity="AppointmentDto" TId="int" TRequest="AppointmentViewModel" Context="@Context">
    <AdvancedSearchContent>
        @if (_canViewEmployees)
        {
            <MudItem Class="mt-3">
                <AutocompleteEmployee @bind-Value="SearchEmployeeId" />
            </MudItem>
        }
    </AdvancedSearchContent>
    <ExtraActions>
        <MudMenuItem>For Approval</MudMenuItem>
        <MudMenuItem Disabled>Approve</MudMenuItem>
    </ExtraActions>
    <EditFormContent>
        @*<MudItem xs="12">
            <AutocompleteEmployee For="@(() => context.EmployeeId)" @bind-Value="SearchEmployeeId" Disabled="!SearchEmployeeId.Equals(Guid.Empty)" />
        </MudItem>*@

        <MudItem xs="12" sm="6">
            <AutocompleteAppointmentType For="@(() => context.AppointmentType)" @bind-Value=context.AppointmentType />
        </MudItem>
        <MudItem xs="12">
            <MudTextField Label="Appointment" For="@(() => context.Subject)" @bind-Value="context.Subject" Variant="Variant.Filled" />
        </MudItem>
        <MudItem xs="12" sm="6">
            <div class="e-bigger">
                <SfDateTimePicker @bind-Value="context.StartDateTime"
                                  TValue="DateTime"
                                  CssClass="e-filled"
                                  Format="MMMM dd, yyyy HH:mm (dddd)"
                                  Placeholder="Start Date/Time"
                                  FloatLabelType="Syncfusion.Blazor.Inputs.FloatLabelType.Auto"
                                  WeekNumber=true />
            </div>
        </MudItem>
        <MudItem xs="12" sm="6">
            <div class="e-bigger">
                <SfDateTimePicker TValue="DateTime" @bind-Value="context.EndDateTime"
                                  TValue="DateTime"
                                  CssClass="e-filled"
                                  Format="MMMM dd, yyyy HH:mm (dddd)"
                                  Placeholder="Start Date/Time"
                                  FloatLabelType="Syncfusion.Blazor.Inputs.FloatLabelType.Auto"
                                  WeekNumber=true />
            </div>
        </MudItem>

        <MudItem xs="12">
            <MudTextField Label="Location" For="@(() => context.Location)" @bind-Value="context.Location" Variant="Variant.Filled" />
        </MudItem>

        <MudItem xs="12" sm="6" md="4" lg="3">
            <MudSwitch Color="Color.Tertiary" Label="All Day" For="@(() => context.IsAllDay)" @bind-Checked="context.IsAllDay" />
        </MudItem>
        <MudItem xs="12" sm="6" md="4" lg="3">
            <MudSwitch Color="Color.Tertiary" Label="Read-Only" For="@(() => context.IsReadonly)" @bind-Checked="context.IsReadonly" />
        </MudItem>
        <MudItem xs="12" sm="6" md="4" lg="3">
            <MudSwitch Color="Color.Tertiary" Label="Block" For="@(() => context.IsBlock)" @bind-Checked="context.IsBlock" />
        </MudItem>

        <MudItem xs="12">
            <MudTextField Label="Description" For="@(() => context.Description)" @bind-Value="context.Description" Lines="1" />
        </MudItem>
        <MudItem xs="12">
            <MudTextField Label="Notes" For="@(() => context.Notes)" @bind-Value="context.Notes" Lines="2" />
        </MudItem>

        <MudItem xs="12">
            <MudItem>
                @if(!string.IsNullOrEmpty(context.ImageInBytes))
                {
                    <MudAvatar Image ="@context.ImageInBytes" Square="true" Style="height: auto; width: auto; max-height: 100%"> </MudAvatar>
                }
                else
                {
                    <MudAvatar Image="@(string.IsNullOrEmpty(@context.ImagePath) ? string.Empty : (Config[ConfigNames.ApiBaseUrl] + @context.ImagePath))" Square="true" Style="height: auto; width: auto; max-height: 100%"> </MudAvatar>
                }
            </MudItem>
            <MudItem>
                <div>
                    <MudButton HtmlTag="label" Variant="Variant.Filled" Color="Color.Primary" Size="Size.Small" StartIcon="@Icons.Material.Filled.CloudUpload" for="fileInput">
                        Upload
                    </MudButton>
                    @if(!Context.AddEditModal.IsCreate && !string.IsNullOrEmpty(context.ImagePath) && string.IsNullOrEmpty(context.ImageInBytes))
                    {
                        <MudButton HtmlTag="label" Variant="Variant.Filled" Color="Color.Info" Size="Size.Small" Target="_blank"
                            StartIcon="@Icons.Material.Filled.RemoveRedEye" Href="@(Config[ConfigNames.ApiBaseUrl] + @context.ImagePath)" Style="margin-left: 5px;" >
                            View
                        </MudButton>

                        <MudButton HtmlTag="label" Variant="Variant.Filled" Color="Color.Error" Size="Size.Small"
                            StartIcon="@Icons.Material.Filled.Delete" OnClick="SetDeleteCurrentImageFlag" Style="margin-left: 5px;" >
                            Delete
                        </MudButton>
                    }
                    @if(!string.IsNullOrEmpty(context.ImageInBytes))
                    {
                        <MudButton HtmlTag="label"  OnClick="ClearImageInBytes" Variant="Variant.Filled" Color="Color.Warning" Size="Size.Small" Target="_blank"
                            StartIcon="@Icons.Material.Filled.Clear" Style="margin-left: 5px;" >
                            Clear
                        </MudButton>
                    }
                </div>
                <InputFile id="fileInput" hidden OnChange="UploadImage" />
            </MudItem>
        </MudItem>
    </EditFormContent>
</EntityTable>

<div class="control-section">
    <div class="schedule-overview">
        <SfAppBar ColorMode="AppBarColor.Primary">
            <span class="time e-icons e-time-zone"></span>
            <span id="timezoneBtn" class="time ">@TimezoneData.Name</span>
            <span class="time e-icons e-clock"></span>
            <span id="timeBtn" class="time current-time">@SystemTime.ToString("hh:mm:ss tt")</span>
            <AppBarSpacer></AppBarSpacer>
            <SfButton IconCss="e-icons e-print" CssClass="title-bar-btn e-inherit" id="printBtn" OnClick="OnPrintClick">Print</SfButton>
            <div class="control-panel">
                <SfUploader AllowedExtensions=".ics" CssClass="calendar-import import-button" AllowMultiple="false">
                    <UploaderButtons Browse="Import"></UploaderButtons>
                    <UploaderEvents ValueChange="OnFileUploadChange"></UploaderEvents>
                </SfUploader>
            </div>
            <div class="control-panel calendar-export">
                <SfDropDownButton Content="Export" class="title-bar-btn e-inherit">
                    <DropDownMenuItems>
                        <DropDownMenuItem Text="iCalendar" IconCss="e-icons e-export"></DropDownMenuItem>
                        <DropDownMenuItem Text="Excel" IconCss="e-icons e-export-excel"></DropDownMenuItem>
                    </DropDownMenuItems>
                    <DropDownButtonEvents ItemSelected="OnExportClick"></DropDownButtonEvents>
                </SfDropDownButton>
            </div>
            <SfButton IconCss="e-icons e-settings" CssClass="overview-toolbar-settings e-inherit" IconPosition="IconPosition.Top" OnClick="OnSettingsClick"></SfButton>
        </SfAppBar>
        <SfToolbar Width="auto" CssClass="overview-toolbar" Height="70px" OverflowMode="OverflowMode.Scrollable" ScrollStep="100">
            <ToolbarItems>
                <ToolbarItem PrefixIcon="e-icons e-plus" TooltipText="New Event" Text="New Event" OnClick="OnNewEventAdd" TabIndex=0></ToolbarItem>
                <ToolbarItem PrefixIcon="e-icons e-repeat" TooltipText="New Recurring Event" Text="New Recurring Event" OnClick="OnNewRecurringEventAdd" TabIndex=0></ToolbarItem>
                <ToolbarItem Type="@ItemType.Separator"></ToolbarItem>
                <ToolbarItem PrefixIcon="e-icons e-day" TooltipText="Day" Text="Day" OnClick="OnDayView" TabIndex=0></ToolbarItem>
                <ToolbarItem PrefixIcon="e-icons e-week" TooltipText="Week" Text="Week" OnClick="OnWeekView" TabIndex=0></ToolbarItem>
                <ToolbarItem PrefixIcon="e-icons e-week" TooltipText="WorkWeek" Text="WorkWeek" OnClick="OnWorkWeekView" TabIndex=0></ToolbarItem>
                <ToolbarItem PrefixIcon="e-icons e-month" TooltipText="Month" Text="Month" OnClick="OnMonthView" TabIndex=0></ToolbarItem>
                <ToolbarItem PrefixIcon="e-icons e-month" TooltipText="Year" Text="Year" OnClick="OnYearView" TabIndex=0></ToolbarItem>
                <ToolbarItem PrefixIcon="e-icons e-agenda-date-range" TooltipText="Agenda" Text="Agenda" OnClick="OnAgendaView" TabIndex=0></ToolbarItem>
                <ToolbarItem TooltipText="Timeline Views" TabIndex=0>
                    <Template>
                        <div class="template">
                            <div class="icon-child">
                                <SfCheckBox @ref="ViewRef" HtmlAttributes="@htmlAttribute" TChecked="bool" ValueChange="OnViewChange"></SfCheckBox>
                            </div>
                            <div class="text-child">Timeline Views</div>
                        </div>
                    </Template>
                </ToolbarItem>
                <ToolbarItem Type="@ItemType.Separator"></ToolbarItem>
                <ToolbarItem TooltipText="Grouping" TabIndex=0>
                    <Template>
                        <div class="template">
                            <div class="icon-child">
                                <SfCheckBox Checked="@EnableGroup" TChecked="bool" ValueChange="OnGroupChange" title="Grouping Resource"></SfCheckBox>
                            </div>
                            <div class="text-child">Grouping</div>
                        </div>
                    </Template>
                </ToolbarItem>
                <ToolbarItem Tooltip="Auto Fit Rows" TabIndex=0>
                    <Template>
                        <div class="template">
                            <div class="icon-child">
                                <SfCheckBox Checked="@isRowAutoHeight" title="Auto fit rows in month and timeline views" Disabled="@(this.CurrentView == View.Day || this.CurrentView == View.Week || this.CurrentView == View.WorkWeek || this.CurrentView == View.Year || CurrentView == View.Agenda)" TChecked="bool" ValueChange="OnRowAutoHeightChange"></SfCheckBox>
                            </div>
                            <div class="text-child">Auto Fit Rows</div>
                        </div>
                    </Template>
                </ToolbarItem>
                <ToolbarItem TooltipText="Time Slots" TabIndex=0>
                    <Template>
                        <div class="template">
                            <div class="icon-child">
                                <SfCheckBox Checked="@EnableTimeScale" title="Time Slots" Disabled="@(CurrentView == View.Agenda || CurrentView == View.Month || CurrentView == View.Year || CurrentView == View.TimelineMonth || CurrentView == View.TimelineYear)" TChecked="bool" ValueChange="OnTimeScaleChange"></SfCheckBox>
                            </div>
                            <div class="text-child">Time Slots</div>
                        </div>
                    </Template>
                </ToolbarItem>
            </ToolbarItems>
            <ToolbarEvents Created="OnToolbarCreated"></ToolbarEvents>
        </SfToolbar>
        <div class="overview-content">
            <div class="left-panel">
                <div class="overview-scheduler">
                    <SfSchedule @ref="ScheduleRef" TValue="AppointmentDto" CssClass="schedule-overview" Width="100%" Height="100%" @bind-SelectedDate="@SelectedDate" @bind-CurrentView="@CurrentView" Timezone="@TimezoneData.Value" FirstDayOfWeek="@FirstDayOfWeek" ShowWeekNumber="@ShowWeekNumber" WeekRule="@WeekRule" WorkDays="@WorkDays" StartHour="@DayStartHour" EndHour="@DayEndHour" EnableAutoRowHeight="@isRowAutoHeight" TimeFormat="@TimeFormat">
                        <ScheduleGroup Resources="@GroupData"></ScheduleGroup>
                        <ScheduleResources>
                            <ScheduleResource TValue="int[]" TItem="CalendarData" DataSource="@Calendars" Query="@ResourceQuery" Field="CalendarId" Title="Calendars" Name="Calendars" TextField="CalendarName" IdField="CalendarId" ColorField="CalendarColor" AllowMultiple="true"></ScheduleResource>
                        </ScheduleResources>
                        <ScheduleViews>
                            <ScheduleView Option="View.Day"></ScheduleView>
                            <ScheduleView Option="View.Week"></ScheduleView>
                            <ScheduleView Option="View.WorkWeek"></ScheduleView>
                            <ScheduleView Option="View.Month"></ScheduleView>
                            <ScheduleView Option="View.Year"></ScheduleView>
                            <ScheduleView Option="View.Agenda"></ScheduleView>
                            <ScheduleView Option="View.TimelineDay"></ScheduleView>
                            <ScheduleView Option="View.TimelineWeek"></ScheduleView>
                            <ScheduleView Option="View.TimelineWorkWeek"></ScheduleView>
                            <ScheduleView Option="View.TimelineMonth"></ScheduleView>
                            <ScheduleView Option="View.TimelineYear"></ScheduleView>
                        </ScheduleViews>
                        <ScheduleTemplates>
                            <DateHeaderTemplate>
                                <div class="date-text">@(((context as TemplateContext).Date).ToString("dd", CultureInfo.InvariantCulture))</div>
                                <div class="date-text">@(((context as TemplateContext).Date).ToString("ddd", CultureInfo.InvariantCulture))</div>
                                @{
                                    @switch ((int)(context as TemplateContext).Date.DayOfWeek)
                                    {
                                        case 0:
                                            //<img class="weather-image" src="@UriHelper.ToAbsoluteUri($"{SampleService.WebAssetsPath}images/scheduler/weather-clear.svg")" />
                                            break;
                                        case 1:
                                            //<img class="weather-image" src="@UriHelper.ToAbsoluteUri($"{SampleService.WebAssetsPath}images/scheduler/weather-clouds.svg")" />
                                            break;
                                        case 2:
                                            //<img class="weather-image" src="@UriHelper.ToAbsoluteUri($"{SampleService.WebAssetsPath}images/scheduler/weather-rain.svg")" />
                                            break;
                                        case 3:
                                            //<img class="weather-image" src="@UriHelper.ToAbsoluteUri($"{SampleService.WebAssetsPath}images/scheduler/weather-clouds.svg")" />
                                            break;
                                        case 4:
                                            //<img class="weather-image" src="@UriHelper.ToAbsoluteUri($"{SampleService.WebAssetsPath}images/scheduler/weather-rain.svg")" />
                                            break;
                                        case 5:
                                            //<img class="weather-image" src="@UriHelper.ToAbsoluteUri($"{SampleService.WebAssetsPath}images/scheduler/weather-clear.svg")" />
                                            break;
                                        case 6:
                                            //<img class="weather-image" src="@UriHelper.ToAbsoluteUri($"{SampleService.WebAssetsPath}images/scheduler/weather-clouds.svg")" />
                                            break;
                                    }
                                }
                            </DateHeaderTemplate>
                        </ScheduleTemplates>
                        <ScheduleTimeScale Enable="@EnableTimeScale" Interval="@SlotInterval" SlotCount="@SlotCount"></ScheduleTimeScale>
                        <ScheduleWorkHours Start="@WorkStartHour" End="@WorkEndHour"></ScheduleWorkHours>
                        <ScheduleEventSettings TValue="AppointmentDto" DataSource="@_appointments" EnableTooltip="@TooltipEnable"></ScheduleEventSettings>
                    </SfSchedule>
                    <SfContextMenu TValue="MenuItem" CssClass="schedule-context-menu" Target=".e-schedule">
                        <MenuItems>
                            <MenuItem Text="New Event" IconCss="e-icons e-plus" Id="Add" Hidden="@isCell"></MenuItem>
                            <MenuItem Text="New Recurring Event" IconCss="e-icons e-repeat" Hidden="@isCell" Id="AddRecurrence"></MenuItem>
                            <MenuItem Text="Today" IconCss="e-icons e-timeline-today" Id="Today" Hidden="@isCell"></MenuItem>
                            <MenuItem Text="Edit Event" IconCss="e-icons e-edit" Id="Save" Hidden="@isEvent"></MenuItem>
                            <MenuItem Text="Edit Event" IconCss="e-icons e-edit" Id="EditRecurrenceEvent" Hidden="@isRecurrence">
                                <MenuItems>
                                    <MenuItem Text="Edit Occurrence" Id="EditOccurrence"></MenuItem>
                                    <MenuItem Text="Edit Series" Id="EditSeries"></MenuItem>
                                </MenuItems>
                            </MenuItem>
                            <MenuItem Text="Delete Event" IconCss="e-icons e-trash" Id="Delete" Hidden="@isEvent"></MenuItem>
                            <MenuItem Text="Delete Event" IconCss="e-icons e-trash" Id="DeleteRecurrenceEvent" Hidden="@isRecurrence">
                                <MenuItems>
                                    <MenuItem Text="Delete Occurrence" Id="DeleteOccurrence"></MenuItem>
                                    <MenuItem Text="Delete Series" Id="DeleteSeries"></MenuItem>
                                </MenuItems>
                            </MenuItem>
                        </MenuItems>
                        <MenuEvents TValue="MenuItem" OnOpen="OnOpen" ItemSelected="OnItemSelected"></MenuEvents>
                    </SfContextMenu>
                </div>
            </div>
            <div class="right-panel @((this.IsSettingsVisible ? "" : "hide"))">
                <div class="control-panel e-css">
                    <div class="col-row">
                        <div class="col-left">
                            <label style="line-height: 34px; margin: 0;">Calendar</label>
                        </div>
                        <div class="col-right">
                            <SfMultiSelect @ref="ResourceRef" TValue="int[]" TItem="CalendarData" CssClass="schedule-resource" Mode="@VisualMode.CheckBox" DataSource="@Calendars" EnableSelectionOrder="false" ShowDropDownIcon="true" @bind-Value="@SelectedResource">
                                <MultiSelectFieldSettings Text="CalendarName" Value="CalendarId"></MultiSelectFieldSettings>
                                <MultiSelectEvents TValue="int[]" TItem="CalendarData" ValueChange="OnResourceChange"></MultiSelectEvents>
                            </SfMultiSelect>
                        </div>
                    </div>
                    <div class="col-row">
                        <div class="col-left">
                            <label style="line-height: 34px; margin: 0;">First Day of Week</label>
                        </div>
                        <div class="col-right">
                            <SfDropDownList TItem="WeekDays" TValue="int" @bind-Value="@FirstDayOfWeek" DataSource="@WeekCollection">
                                <DropDownListFieldSettings Text="Name" Value="Value"></DropDownListFieldSettings>
                                <DropDownListEvents TValue="int" ValueChange="OnWeekDaysChange" TItem="WeekDays"></DropDownListEvents>
                            </SfDropDownList>
                        </div>
                    </div>
                    <div class="col-row">
                        <div class="col-left">
                            <label style="line-height: 34px; margin: 0;">Work week</label>
                        </div>
                        <div class="col-right">
                            <SfMultiSelect TValue="int[]" TItem="WeekDays" CssClass="schedule-workweek" Mode="@VisualMode.CheckBox" DataSource="@WeekCollection" EnableSelectionOrder="false" ShowDropDownIcon="true" @bind-Value="@WorkDays">
                                <MultiSelectFieldSettings Text="Name" Value="Value"></MultiSelectFieldSettings>
                                <MultiSelectEvents TValue="int[]" TItem="WeekDays" ValueChange="OnWorkDaysChange"></MultiSelectEvents>
                            </SfMultiSelect>
                        </div>
                    </div>
                    <div class="col-row">
                        <div class="col-left">
                            <label style="line-height: 34px; margin: 0;">Day Start Hour</label>
                        </div>
                        <div class="col-right">
                            <SfTimePicker TValue="DateTime?" Format="HH:mm" @bind-Value="@ScheduleStartHour" ShowClearButton="false">
                                <TimePickerEvents TValue="DateTime?" ValueChange="OnDayStartHourChange"></TimePickerEvents>
                            </SfTimePicker>
                        </div>
                    </div>
                    <div class="col-row">
                        <div class="col-left">
                            <label style="line-height: 34px; margin: 0;">Day End Hour</label>
                        </div>
                        <div class="col-right">
                            <SfTimePicker TValue="DateTime?" Format="HH:mm" @bind-Value="@ScheduleEndHour" ShowClearButton="false">
                                <TimePickerEvents TValue="DateTime?" ValueChange="OnDayEndHourChange"></TimePickerEvents>
                            </SfTimePicker>
                        </div>
                    </div>
                    <div class="col-row">
                        <div class="col-left">
                            <label style="line-height: 34px; margin: 0;">Work Start Hour</label>
                        </div>
                        <div class="col-right">
                            <SfTimePicker TValue="DateTime?" Format="HH:mm" @bind-Value="@StartWorkHour" ShowClearButton="false">
                                <TimePickerEvents TValue="DateTime?" ValueChange="OnWorkStartHourChange"></TimePickerEvents>
                            </SfTimePicker>
                        </div>
                    </div>
                    <div class="col-row">
                        <div class="col-left">
                            <label style="line-height: 34px; margin: 0;">Work End Hour</label>
                        </div>
                        <div class="col-right">
                            <SfTimePicker TValue="DateTime?" Format="HH:mm" @bind-Value="@EndWorkHour" ShowClearButton="false">
                                <TimePickerEvents TValue="DateTime?" ValueChange="OnWorkEndHourChange"></TimePickerEvents>
                            </SfTimePicker>
                        </div>
                    </div>
                    <div class="col-row">
                        <div class="col-left">
                            <label style="line-height: 34px; margin: 0;">Slot Duration</label>
                        </div>
                        <div class="col-right">
                            <SfDropDownList TItem="SlotData" TValue="int" PopupHeight="150px" DataSource="@SlotIntervalDataSource" @bind-Value="@SlotInterval">
                                <DropDownListFieldSettings Text="Name" Value="Value"></DropDownListFieldSettings>
                                <DropDownListEvents TItem="SlotData" TValue="int" ValueChange="OnSlotIntervalChange"></DropDownListEvents>
                            </SfDropDownList>
                        </div>
                    </div>
                    <div class="col-row">
                        <div class="col-left">
                            <label style="line-height: 34px; margin: 0;">Slot Interval</label>
                        </div>
                        <div class="col-right">
                            <SfDropDownList TItem="SlotData" TValue="int" PopupHeight="150px" DataSource="@SlotCountDataSource" @bind-Value="@SlotCount">
                                <DropDownListFieldSettings Text="Name" Value="Value"></DropDownListFieldSettings>
                            </SfDropDownList>
                        </div>
                    </div>
                    <div class="col-row">
                        <div class="col-left">
                            <label style="line-height: 34px; margin: 0;">Time Format</label>
                        </div>
                        <div class="col-right">
                            <SfDropDownList TItem="TimeFormatData" TValue="string" PopupHeight="150px" DataSource="@TimeFormatDataSource" @bind-Value="@TimeFormat">
                                <DropDownListFieldSettings Text="Name" Value="Value"></DropDownListFieldSettings>
                            </SfDropDownList>
                        </div>
                    </div>
                    <div class="col-row">
                        <div class="col-left">
                            <label style="line-height: 34px; margin: 0;">Week Numbers</label>
                        </div>
                        <div class="col-right">
                            <SfDropDownList TItem="WeekNumbers" TValue="string" PopupHeight="150px" DataSource="@WeekNumbersData" @bind-Value="@WeeklyRule">
                                <DropDownListEvents TItem="WeekNumbers" TValue="string" ValueChange="OnWeekNumberChange"></DropDownListEvents>
                                <DropDownListFieldSettings Text="Name" Value="Value"></DropDownListFieldSettings>
                            </SfDropDownList>
                        </div>
                    </div>
                    <div class="col-row">
                        <div class="col-left">
                            <label style="line-height: 34px; margin: 0;">Tooltip</label>
                        </div>
                        <div class="col-right">
                            <SfDropDownList TItem="Tooltip" TValue="string" PopupHeight="150px" DataSource="@TooltipData" @bind-Value="@Tooltipvalue">
                                <DropDownListEvents TItem="Tooltip" TValue="string" ValueChange="OnTooltipChange"></DropDownListEvents>
                                <DropDownListFieldSettings Text="Name" Value="Value"></DropDownListFieldSettings>
                            </SfDropDownList>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .tailwind .schedule-overview .overview-content .right-panel .control-panel {
        background-color: #f3f4f6;
    }

    .tailwind-dark .schedule-overview .overview-content .right-panel .control-panel {
        background-color: #374151;
        color: #fff;
    }

    .material .schedule-overview .overview-content .right-panel .control-panel {
        background-color: #fafafa;
    }

    .material-dark .schedule-overview .overview-content .right-panel .control-panel {
        background-color: #2a2a2a;
        color: #ffff;
    }

    .fabric .schedule-overview .overview-content .right-panel .control-panel {
        background-color: #ffffff;
    }

    .fabric-dark .schedule-overview .overview-content .right-panel .control-panel {
        background-color: #333232;
        color: #fff;
    }

    .fluent .schedule-overview .overview-content .right-panel .control-panel {
        background-color: #f3f2f1;
    }

    .fluent-dark .schedule-overview .overview-content .right-panel .control-panel {
        background-color: #252423;
        border-color: #c1c1c1;
        color: #fff;
    }

    .bootstrap .schedule-overview .overview-content .right-panel .control-panel {
        background-color: #f8f8f8;
    }

    .bootstrap-dark .schedule-overview .overview-content .right-panel .control-panel {
        background-color: #2a2a2a;
        color: #fff;
    }

    .bootstrap5 .schedule-overview .overview-content .right-panel .control-panel {
        background-color: #f8f9fa;
        color: #212529;
    }

    .bootstrap5-dark .schedule-overview .overview-content .right-panel .control-panel {
        background-color: #343a40;
        color: #fff;
    }

    .highcontrast .schedule-overview .overview-content .right-panel .control-panel {
        background-color: #000000;
        color: #ffffff;
    }

    .schedule-overview .overview-toolbar.e-rtl + * {
        flex-direction: row-reverse;
    }

    .schedule-overview .overview-toolbar.e-toolbar {
        border-radius: 0;
    }

        .schedule-overview .overview-toolbar.e-toolbar .e-toolbar-item .e-tbar-btn.e-tbtn-txt {
            display: inline-grid;
        }

    .material .schedule-overview .overview-toolbar.e-toolbar {
        border-style: solid;
    }

    .schedule-overview .overview-toolbar.e-toolbar .e-toolbar-item:not(.e-separator) {
        padding: 3.5px;
    }

    .schedule-overview .overview-toolbar.e-toolbar .e-toolbar-item .e-btn.e-tbar-btn .e-icons.e-btn-icon,
    .schedule-overview .overview-toolbar.e-toolbar .e-toolbar-item .e-btn.e-tbar-btn .e-tbar-btn-text {
        line-height: 23px !important;
        min-height: 23px !important;
        padding: 0px !important;
    }

    .schedule-overview .overview-toolbar.e-toolbar .e-toolbar-item.e-template {
        margin: 0 5px;
    }

    .schedule-overview .overview-content {
        display: flex;
    }

        .schedule-overview .overview-content .left-panel {
            height: 700px;
            width: 100%;
        }

        .schedule-overview .overview-content .right-panel {
            display: block;
            height: 700px;
            transform: translateX(0%);
            transition: transform .5s ease, width 500ms;
            width: 500px;
        }

            .schedule-overview .overview-content .right-panel.hide {
                display: none;
                transform: translateX(100%);
                transition: transform .5s ease, width 500ms;
                width: 0;
            }

            .schedule-overview .overview-content .right-panel .control-panel {
                background: #f8f9fa;
                font-size: 14px;
                height: 100%;
                overflow: auto;
                padding: 15px;
                width: 100%;
            }

                .schedule-overview .overview-content .right-panel .control-panel .col-row {
                    display: flex;
                    flex-wrap: wrap;
                }

                .schedule-overview .overview-content .right-panel .control-panel label {
                    font-weight: 500;
                }

                .schedule-overview .overview-content .right-panel .control-panel .col-left {
                    flex: 0 0 41.666667%;
                    max-width: 41.666667%;
                    margin-bottom: 1rem;
                }

                .schedule-overview .overview-content .right-panel .control-panel .col-right {
                    flex: 0 0 58.333333%;
                    max-width: 58.333333%;
                    margin-bottom: 1rem;
                }

    .schedule-overview .overview-scheduler {
        height: 100%;
        width: 100%;
    }

    .schedule-overview .e-schedule-toolbar .e-views,
    .schedule-overview .e-schedule-toolbar .e-schedule-seperator,
    .schedule-workweek.e-multi-select-list-wrapper.e-checkbox .e-filter-parent,
    .schedule-resource.e-multi-select-list-wrapper.e-checkbox .e-filter-parent {
        display: none;
    }

    .schedule-overview .e-timeline-view .e-resource-left-td,
    .schedule-overview .e-timeline-month-view .e-resource-left-td {
        width: 120px;
    }

    .schedule-resource.e-multi-select-list-wrapper.e-checkbox .e-list-parent:first-child li:first-child {
        background-image: none;
        opacity: .5;
        pointer-events: none;
        user-select: none;
    }

    .schedule-overview .calendar-import.e-upload {
        border: 0;
        padding-left: 0 !important;
    }

        .schedule-overview .calendar-import.e-upload .e-btn-icon {
            margin-left: initial;
        }

        .schedule-overview .calendar-import.e-upload .e-file-select-wrap {
            padding: 0
        }

            .schedule-overview .calendar-import.e-upload .e-file-select-wrap .e-file-drop,
            .calendar-import .e-upload-files {
                display: none;
            }

    .e-bigger .schedule-context-menu ul .e-menu-item .e-menu-icon {
        font-size: 14px;
    }

    .schedule-context-menu ul .e-menu-item .e-menu-icon {
        font-size: 12px;
    }

    .schedule-overview.e-schedule .e-vertical-view .e-header-cells,
    .schedule-overview.e-schedule .e-timeline-month-view .e-header-cells {
        padding: 0;
        text-align: center !important;
    }

    .schedule-overview.e-schedule .date-text {
        font-size: 14px;
    }

    .schedule-overview.e-schedule.e-device .date-text {
        font-size: 12px;
    }

    .schedule-overview.e-schedule .weather-image {
        width: 20px;
        height: 20px;
        background-position: center center;
        background-repeat: no-repeat;
        background-size: cover;
    }

    .schedule-overview.e-schedule .e-month-view .weather-image {
        float: right;
        margin: -20px 2px 0 0;
        width: 20px;
        height: 20px;
    }

    .tailwind .schedule-overview.e-schedule .e-left-indent .e-header-cells,
    .tailwind-dark .schedule-overview.e-schedule .e-left-indent .e-header-cells {
        height: 66px;
    }

    .fluent .e-appbar .e-btn-icon.e-icons,
    .fluent-dark .e-appbar .e-btn-icon.e-icons {
        margin-top: -2px;
    }

    .fluent .e-toolbar-item .e-checkbox-wrapper .e-icons.e-frame,
    .fluent-dark .e-toolbar-item .e-checkbox-wrapper .e-icons.e-frame {
        height: 17px;
        line-height: 17px;
        width: 17px;
    }

        .fluent .e-toolbar-item .e-checkbox-wrapper .e-icons.e-frame.e-check,
        .fluent-dark .e-toolbar-item .e-checkbox-wrapper .e-icons.e-frame.e-check {
            font-size: 15px;
            line-height: 16px;
        }

    .e-toolbar .e-toolbar-item .e-tbar-btn {
        padding-top: 2px;
        padding-bottom: 2px;
    }

    .time {
        display: flex;
        gap: 5px;
        align-items: center;
        padding: 0 5px;
    }

    .template {
        height: 46px;
        line-height: 23px;
    }

        .template .icon-child {
            text-align: center;
            height: 23px !important;
        }

        .template .text-child {
            font-size: 14px;
            line-height: 23px !important;
        }

    .import-button .e-css.e-btn {
        color: inherit;
        box-shadow: none;
        background: inherit;
        border-color: rgba(0, 0, 0, 0);
    }

    @@media (max-width: 481px) {
        .schedule-overview .overview-content .right-panel {
            position: absolute;
            width: 90%;
        }

        .import-button,
        #printBtn,
        .calendar-export {
            display: none;
        }
    }

    @@media (max-width: 1024px) {
        .schedule-overview .overview-content .right-panel .control-panel .col-row {
            display: initial;
        }

        .schedule-overview .overview-content .right-panel .control-panel .col-left {
            flex: initial;
            max-width: initial;
            margin-bottom: initial;
        }

        .schedule-overview .overview-content .right-panel .control-panel .col-right {
            flex: initial;
            max-width: initial;
        }
    }
</style>

@code{
    private RenderFragment<AppointmentDto> TemplateStartEnd => context => __builder =>
    {
        <MudItem Class="d-flex flex-column">
            <MudText Typo="Typo.caption">
                @context.StartDateTime.ToString("dddd MMMM dd, yyyy HH:mm")
            </MudText>
            <MudText Typo="Typo.subtitle2">
                @context.EndDateTime.ToString("dddd MMMM dd, yyyy HH:mm")
            </MudText>
        </MudItem>
    };

    private RenderFragment<AppointmentDto> TemplateDescriptionNotes => context => __builder =>
    {
        <MudItem Class="d-flex flex-column">
            <MudText Typo="Typo.subtitle2">
                <MudHighlighter Text="@context.Description" HighlightedText="@_searchString" />
            </MudText>
            <MudText Typo="Typo.caption">
                <MudHighlighter Text="@context.Notes" HighlightedText="@_searchString" />
            </MudText>
        </MudItem>
    };
}